{% extends "account/base_entrance.html" %}
{% load static %}
{% load i18n %}
{% load allauth account %}
{% block head_title %}Sign In - {{ block.super }}{% endblock head_title %}
{% block content %}
<div class="hero bg-base-200 min-h-screen">
  <div class="hero-content flex-col lg:flex-row-reverse">
    <div class="text-center lg:text-left">
      <h1 class="text-5xl font-bold">Login now!</h1>
      <p class="py-6">
        Provident cupiditate voluptatem et in. Quaerat fugiat ut assumenda excepturi exercitationem
        quasi. In deleniti eaque aut repudiandae et a id nisi.
      </p>
    </div>
    <div class="card bg-base-100 w-full max-w-sm shrink-0 shadow-2xl">
      <div class="card-body">
        <div class="flex flex-nowrap w-3/10 mb-5">
          <a href="{% url 'index' %}" class="flex items-end space-x-1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.2" stroke="currentColor" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
            </svg>
            <span>Home</span>
          </a>
        </div>
        <fieldset class="fieldset">
          {% if not SOCIALACCOUNT_ONLY %}
            {% setvar link %}
                <a class="link" href="{% url 'contact' %}">
                {% endsetvar %}
                {% setvar end_link %}
                </a>
            {% endsetvar %}
            {% element p %}
                {% blocktranslate %}For internal use only. If you need an account, please {{ link }}contact admin{{ end_link }}.{% endblocktranslate %}
            {% endelement %}
            {% url 'account_login' as login_url %}
            {% element form form=form method="post" action=login_url tags="entrance,login" %}
                {% slot body %}
                    {% csrf_token %}
                    {% element fields form=form unlabeled=True %}
                    {% endelement %}
                    {{ redirect_field }}
                {% endslot %}
                {% slot actions %}
                    {% element button type="submit" tags="neutral,login" %}
                        {% trans "Log In" %}
                    {% endelement %}
                {% endslot %}
            {% endelement %}
          {% endif %}
          {% if LOGIN_BY_CODE_ENABLED or PASSKEY_LOGIN_ENABLED %}
              {% element hr %}
              {% endelement %}
              {% element button_group vertical=True %}
                  {% if PASSKEY_LOGIN_ENABLED %}
                      {% element button type="submit" form="mfa_login" id="passkey_login" tags="prominent,login,outline,primary" %}
                          {% trans "Sign in with a passkey" %}
                      {% endelement %}
                  {% endif %}
                  {% if LOGIN_BY_CODE_ENABLED %}
                      {% element button href=request_login_code_url tags="prominent,login,outline,primary" %}
                          {% trans "Send me a sign-in code" %}
                      {% endelement %}
                  {% endif %}
              {% endelement %}
          {% endif %}
          {% if SOCIALACCOUNT_ENABLED %}
              {% include "socialaccount/snippets/login.html" with page_layout="entrance" %}
          {% endif %}
        </fieldset>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
{% block extra_body %}
    {{ block.super }}
    {% if PASSKEY_LOGIN_ENABLED %}
        {% include "mfa/webauthn/snippets/login_script.html" with button_id="passkey_login" %}
    {% endif %}
{% endblock %}